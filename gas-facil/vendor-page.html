<!DOCTYPE html>
<html lang="en">

<head>
<script type="text/javascript"
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript"
	src="http://www.parsecdn.com/js/parse-1.2.19.min.js"></script>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">

<title>Gás Fácil</title>

<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="css/thumbnail-gallery.css" rel="stylesheet">
<link href="css/navbar-custom.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
	<div class="main">
		<script type="text/javascript">
			var getPhotos = function() {
				Parse.initialize("rMJLW7qybdglATi4FowrRFwmVqZkLoxuo6vntg1c", "cvrkyMx0c4X2oG8vI9OkvtjnAClum3K9HMTkCj4i");
				var productsImages = Parse.Object.extend("Produto");
				var query = new Parse.Query(productsImages);
				query.find({
					success : function(results) {
						imageURLs = [];
						for (var i = 0; i < results.length; i++) {
							var object = results[i];
							imageURLs.push(object.get('photo').url());
							var index = i + 1;
							$('#Image0' + index).attr('src', imageURLs[i]);
						}

					},
					error : function(error) {
						alert("Error: " + error.code + " " + error.message);
					}
				});
			};
			
			var getPedidos = function() {
				Parse.initialize("rMJLW7qybdglATi4FowrRFwmVqZkLoxuo6vntg1c", "cvrkyMx0c4X2oG8vI9OkvtjnAClum3K9HMTkCj4i");
				var pedidos = Parse.Object.extend("Pedido");
				var queryPedidos = new Parse.Query(pedidos);
				
				queryPedidos.find({
					success : function(results) {
						pedidos = [];
						
						for (var i = 0; i < results.length; i++) {
							var object = results[i];
							pedido = [];
							
							pedido.push(object.get('objecId'));
							
							var comprador = object.get('comprador');
							pedido.push(comprador.get('nome'));
							pedido.push(comprador.get('endereco'));
							
							var produto = object.get('produto');
							pedido.push(produto.get('type'));

							pedido.push(object.get('quantidade'));
							
							pedidos.push(pedido);
						}
						
						var table = document.getElementById("table-pedidos");  // set this to your table

						var tbody = document.createElement("tbody");
						table.appendChild(tbody);
						pedidos.forEach(function(items) {
							var row = document.createElement("tr");
						  	items.forEach(function(item) {
						    	var cell = document.createElement("td");
						    	cell.textContent = item;
						    	row.appendChild(cell);
						  	});
							tbody.appendChild(row);
						});

					},
					error : function(error) {
						alert("Error: " + error.code + " " + error.message);
					}
				});
			};

			$(document).ready(function() {
				$("#pedidos-list").hide();
				getPhotos();
				getPedidos();
			});
			$(document).ready(function() {
				$('img').on('click',function() {
					var src = $(this).attr('src');
					var img = '<img src="' + src + '" class="img-responsive"/>';
					$('#myModal').modal();
					$('#myModal').on('shown.bs.modal', function() {
						$('#myModal .modal-body').html(img);
					});
					$('#myModal').on('hidden.bs.modal',function() {
						$('#myModal .modal-body').html('');
					});
				});
			})
		</script>

		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button id="dropdown-menu" type="button"
						class="navbar-toggle collapsed" data-toggle="collapse"
						data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
				</div>
				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse"
					id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li><a id="products-opt" href="#">Produtos</a></li>
						<li><a id="pedidos-opt" href="#">Pedidos</a></li>
						<li><a id="history-opt" href="#">Histórico</a></li>
						<li><a id="profile-opt" href="#">Perfil</a></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a id="logout" href="index.html">Sair</a></li>
					</ul>
				</div>

				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container -->
			<script type="text/javascript">
				$("#products-opt").click(function() {
					getPhotos();
					$("#products-list").show();
					$("#pedidos-list").hide();
				});
				$("#pedidos-opt").click(function() {
					$("#pedidos-list").show();
					$("#products-list").hide();
				});
				$("#history-opt").click(function() {
					$("#products-list").hide();
					$("#pedidos-list").hide();
				});
				$("#profile-opt").click(function() {
					$("#products-list").hide();
					$("#pedidos-list").hide();
				});
				$('#dropdown-menu').change(function() {
					var selected = $(this).find(':selected').val();
					if (selected == 1) {
						getPhotos();
					}
				});
				$("#logout").click(function() {
					Parser.User.logout();
				});
			</script>
		</nav>

		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body"></div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<!-- /.modal -->
		<!-- Page Content -->

		<div id="products-list" class="container">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">Produtos</h1>
				</div>
				<div class="col-lg-3 col-md-4 col-xs-6 thumb">
					<a class="thumbnail" href="#"> <img class="img-responsive"
						id="Image01" src="http://placehold.it/400x300" alt="">
					</a>
				</div>
				<div class="col-lg-3 col-md-4 col-xs-6 thumb">
					<a class="thumbnail" href="#"> <img class="img-responsive"
						id="Image02" src="http://placehold.it/400x300" alt="">
					</a>
				</div>
				<div class="col-lg-3 col-md-4 col-xs-6 thumb">
					<a class="thumbnail" href="#"> <img class="img-responsive"
						id="Image03" src="http://placehold.it/400x300" alt="">
					</a>
				</div>
			</div>

			<hr>

			<!-- Footer -->
			<div class="footer" style="text-align: center">
				<small>Copyright © 2014 Gás Fácil</small>
			</div>
		</div>

		<div id="pedidos-list" class="container">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">Pedidos</h1>
				</div>
				
				<div class="container-table">
					<table id="table-pedidos" class="table table-striped">
						<thead>
							<tr>
								<th>Id</th>
								<th>Nome do cliente</th>
								<th>Endereço de entrega</th>
								<th>Produto</th>
								<th>Quantidade</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
			<!-- /.container -->
			
			<hr>

			<!-- Footer -->
			<div class="footer" style="text-align: center">
				<small>Copyright © 2014 Gás Fácil</small>
			</div>
		</div>

		<!-- jQuery Version 1.11.1 -->
		<script src="js/jquery-1.11.1.min.js"></script>

		<!-- Bootstrap Core JavaScript -->
		<script src="js/bootstrap.min.js">
		</script>
	</div>

</body>
</html>
